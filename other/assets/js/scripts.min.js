function b() {
    $steam.animate({
        "background-position": "0px -137px"
    },
    1e4, "linear",
    function() {
        $steam.css("background-position", "0px 0px"),
        b()
    })
}
// pathname = window.location.pathname,
// pathname = pathname.substring(1, pathname.length - 1),
pathname = '/',
"" !== pathname && "/" !== pathname && ($mainNavWrap = $("header nav#main_nav"), $mainNavLink = $("header nav#main_nav a"), $introWrap = $("div.content section#intro"), $introP = $("div.content section#intro p"), $introText = $("div.content section#intro p span"), $ajaxPortal = $("div.content div#section_portal"), $menuButton = $("div.content section#intro button#menu_return"), "work" === pathname && (sectionText = "捐赠", sectionAjax = "work"), "about" === pathname && (sectionText = "关于我", sectionAjax = "about"), "contact" === pathname && (sectionText = "一起聊聊~", sectionAjax = "contact"), $mainNavWrap.animate({
    top: "15em",
    opacity: "0"
},
500,
function() {
    $mainNavWrap.hide()
}), $introText.animate({
    opacity: "0"
},
500,
function() {
    $introText.text(sectionText).css({
        "font-size": "1.5em",
        "float": "left"
    }).animate({
        opacity: "1"
    },
    500),
    $introP.animate({
        "margin-top": "0"
    },
    500),
    $introWrap.animate({
        "padding-top": "1.25em"
    },
    500,
    function() {
        $ajaxPortal.empty().append('nothing').animate({
            opacity: "1"
        },
        500),
        $menuButton.show().css("opacity", "0").animate({
            opacity: "1"
        },
        500)
    })
})),
$mainNavWrap = $("header nav#main_nav"),
$mainNavLink = $("header nav#main_nav a"),
$introWrap = $("div.content section#intro"),
$introP = $("div.content section#intro p"),
$introText = $("div.content section#intro p span"),
$ajaxPortal = $("div.content div#section_portal"),
$menuButton = $("div.content section#intro button#menu_return"),
$mainNavLink.on("click",
function(b) {
    $this = $(this),
    b.preventDefault(),
    "work" === $this.attr("id") && (sectionText = "捐赠", sectionAjax = "work"),
    "about" === $this.attr("id") && (sectionText = "关于我", sectionAjax = "about"),
    "contact" === $this.attr("id") && (sectionText = "一起聊聊~", sectionAjax = "contact"),
    "undefined" != typeof history.pushState /*&& window.history.pushState("", "", sectionAjax + "/")*/,
    $mainNavWrap.animate({
        top: "15em",
        opacity: "0"
    },
    500,
    function() {
        $mainNavWrap.hide()
    }),
    $introText.stop().animate({
        opacity: "0"
    },
    500,
    function() {
        $introText.text(sectionText).css({
            "font-size": "1.5em",
            "float": "left"
        }).stop().animate({
            opacity: "1"
        },
        500),
        $introP.stop().animate({
            "margin-top": "0"
        },
        500),
        $introWrap.stop().animate({
            "padding-top": "1.25em"
        },
        500,
        function() {
            workstr = '\
                <section id="work">\
                    <p style="margin: -5px auto 7px auto;">请我喝左边的热乎乎的咖啡~~~</p>\
                    <img src="./assets/img/alipay_me.jpg" alt="" style="max-height:18em;" />\
                </section>\
            ',
            aboutstr = '\
                <section id="about">\
                    <p style="margin: -5px auto 7px auto;">我爱上帝的命令胜于金子， 更胜于精金~~~</p>\
                    <img src="./assets/img/heaven.png" alt="" style="max-height:18em;" />\
                </section>\
            ',
            concatstr = '\
                <section id="contact">\
                    <br/>\
                    <br/>\
                    <p style="margin: -5px auto 7px auto;">任何意见或建议或唠嗑，请发我邮箱~~~</p>\
                    <p style="margin: -5px auto 7px auto;">~~~leptune@163.com~~~</p>\
                </section>\
            ',
            tmp = '',
            "work" === sectionAjax && (tmp = workstr),
            "about" === sectionAjax && (tmp = aboutstr),
            "contact" === sectionAjax && (tmp = concatstr),
            $ajaxPortal.empty().append(tmp).stop().animate({
                opacity: "1"
            },
            500),
            $menuButton.show().css("opacity", "0").stop().animate({
                opacity: "1"
            },
            500)
        })
    })
}),
$menuButton.on("mousedown",
function() {
    $this = $(this),
    $contentExpand = $("div#content_expand"),
    sectionText = "Good Good Study, Day Day Up~~",
    $("html,body").animate({
        scrollTop: $("#content_wrap").offset().top
    },
    2e3),
    $this.animate({
        opacity: "0"
    },
    500,
    function() {
        $this.hide()
    }),
    $ajaxPortal.animate({
        opacity: "1"
    },
    500,
    function() {
        $ajaxPortal.html(""),
        $mainNavWrap.show().css("opacity", "0").animate({
            top: "17em",
            opacity: "1"
        },
        500)
    }),
    $introText.animate({
        opacity: "0"
    },
    500,
    function() {
        $introWrap.animate({
            "padding-top": "2em"
        },
        500),
        $introText.text(sectionText).css({
            "font-size": "1em",
            "float": "none"
        }).animate({
            opacity: "1"
        },
        500),
        $introP.animate({
            "margin-top": "1em"
        },
        500),
        "undefined" != typeof history.pushState // && window.history.pushState("", "", "/")
    }),
    $contentExpand.slideUp(1e3,
    function() {
        $contentExpand.html("").show()
    })
}),
$("div.content div#section_portal").on("click", "section nav a",
function(b) {
    $this = $(this),
    $contentExpand = $("div#content_expand"),
    $thisDoc = $("html, body"),
    extraTarget = !1,
    "interactive" === $this.attr("id") && (b.preventDefault(), targetContent = "/work/interactive.php section#interactive_display", extraTarget = !0),
    "tshirts" === $this.attr("id") && (b.preventDefault(), targetContent = "/work/redbubble.php", extraTarget = !0),
    "downloads" === $this.attr("id") && (b.preventDefault(), targetContent = "/work/downloads.php section#downloads_display", extraTarget = !0),
    "story" === $this.attr("id") && (b.preventDefault(), targetContent = "/about/story.php", extraTarget = !0),
    extraTarget === !0 && $contentExpand.load(targetContent,
    function() {
        $thisDoc.animate({
            scrollTop: $("#content_expand").offset().top
        },
        500),
        a.featherlight()
    })
}),
$backToTop = $("footer a.back-to-top");
var c = 220,
d = 500;
$(window).scroll(function() {
    $this = $(this),
    $this.scrollTop() > c ? $backToTop.fadeIn(d) : $backToTop.fadeOut(d)
}),
$backToTop.on("click",
function(b) {
    return b.preventDefault(),
    $("html, body").animate({
        scrollTop: 0
    },
    d),
    !1
}),
setInterval(function() {
    $("div.eyes").animate({
        "background-position": "-327px 0"
    },
    1).delay(100).animate({
        "background-position": "-654px 0"
    },
    1).delay(100).animate({
        "background-position": "-327px 0"
    },
    1).delay(100).animate({
        "background-position": "0 0"
    },
    1)
},
7e3),
$steam = $("div.joe div.steam"),
b(),
$birdWrap = $("div.bird"),
$bird = $("div.bird span.sprite"),
$twitterLink = $("a.twitter_link"),
$tweetWrap = $("div.bird div.last_tweet_wrap"),
$tweetClose = $("div.bird div.last_tweet_wrap span.close"),
$birdWrap.rotate(30);
var e = setInterval(function() {
    $bird.animate({
        "background-position": "-100px 0"
    },
    1).delay(25).animate({
        "background-position": "-200px 0"
    },
    1).delay(25).animate({
        "background-position": "-300px 0"
    },
    1).delay(25).animate({
        "background-position": "-200px 0"
    },
    1).delay(25).animate({
        "background-position": "-100px 0"
    },
    1).delay(25)
},
130);
setTimeout(function() {
    $birdWrap.animate({
        left: "202px",
        top: "84px"
    },
    2e3,
    function() {
        $birdWrap.animate({
            left: "212px",
            top: "64px"
        },
        500, "easeOutCirc",
        function() {
            $birdWrap.rotate({
                animateTo: 0
            }),
            $birdWrap.animate({
                left: "222px",
                top: "104px"
            },
            1e3, "easeOutCirc",
            function() {
                clearInterval(e),
                $bird.replaceWith('<span class="static_bird"></span>')
            })
        })
    })
},
1e3),
$twitterLink.on("click",
function(a) {
    a.preventDefault(),
    $tweetWrap.hasClass("opened") ? $tweetWrap.animate({
        opacity: "0",
        left: "140px"
    },
    500, "easeOutCirc",
    function() {
        $tweetWrap.css({
            opacity: "0",
            left: "100px"
        }).hide()
    }).removeClass("opened") : $tweetWrap.show().css("opacity", "0").animate({
        opacity: "1",
        left: "120px"
    },
    500, "easeOutBounce").addClass("opened")
}),
$twitterLink.on("mouseenter",
function(b) {
    b.preventDefault(),
    $audio = $("#tweet_sound")[0],
    $audio.volume = .5,
    $audio.play(),
    $("span.static_bird").css("background-position", "-500px 0"),
    setTimeout(function() {
        $("span.static_bird").css("background-position", "-400px 0")
    },
    250)
}),
$tweetClose.on("click",
function(b) {
    b.preventDefault(),
    $("span.static_bird").css("background-position", "-500px 0"),
    $tweetWrap.animate({
        opacity: "0",
        left: "140px"
    },
    500, "easeOutCirc",
    function() {
        $tweetWrap.css({
            opacity: "0",
            left: "100px"
        }).hide(),
        $("span.static_bird").css("background-position", "-400px 0")
    }).removeClass("opened")
}),
$twitterLink.on("mousedown",
function() {
    $("span.static_bird").css("background-position", "-500px 0")
}),
$twitterLink.on("mouseup",
function() {
    $("span.static_bird").css("background-position", "-400px 0")
}),
ballStartPos = parseInt($(window).width(), 10),
ballEndLeft = ballStartPos - 275,
$ballWrap = $("div.ball"),
$ball = $("div.ball a.basketball span.ball"),
$ballShadow = $("div.ball-shadow"),
$ballBubble = $("div.ball div.dribble-bubble"),
$ballWrap.css({
    left: ballStartPos,
    top: "300px"
}),
$ballShadow.css({
    left: ballStartPos
});
var f;
setTimeout(function() {
    var a = setInterval(function() {
        ballPosition = $ballWrap.position(),
        $ballShadow.css("left", ballPosition.left)
    },
    5),
    b = 0,
    c = setInterval(function() {
        b -= 10,
        $ball.rotate(b)
    },
    50);
    $ballWrap.animate({
        left: "-=" + ballEndLeft,
        top: ["+=200", "easeOutBounce"]
    },
    1750, "easeOutSine",
    function() {
        clearInterval(c),
        $ballWrap.animate({
            left: "300px"
        },
        1e3,
        function() {
            clearInterval(a),
            $ballBubble.show().hide()
        }),
        $ball.rotate({
            duration: 1e3,
            animateTo: -280
        })
    })
},
3500),
$ballWrap.on("mouseenter",
function() {
    clearTimeout(f),
    $ballBubble.stop().show().css("opacity", "0").animate({
        opacity: "1",
        bottom: "145px",
        left: "90px"
    },
    250)
}),
$ballWrap.on("mouseleave",
function() {
    f = setTimeout(function() {
        $ballBubble.stop().animate({
            bottom: "125px",
            left: "70px",
            opacity: "0"
        },
        250,
        function() {
            $ballBubble.hide()
        })
    },
    250)
}),
$("a").each(function() {
    $this = $(this);
    var b = new RegExp("/" + window.location.host + "/"); (!b.test(this.href) || $this.hasClass("newWindow")) && $this.not(".keep_in_window").on("click",
    function(a) {
        a.preventDefault(),
        a.stopPropagation(),
        window.open(this.href, "_blank")
    })
})
