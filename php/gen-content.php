<?php
$tmpChs = [
    'Genesis'        ,
    'Exodus'         ,
    'Leviticus'      ,
    'Numbers'        ,
    'Deuteronomy'    ,
    'Joshua'         ,
    'Judges'         ,
    'Ruth'           ,
    'Samuel1'        ,
    'Samuel2'        ,
    'Kings1'         ,
    'Kings2'         ,
    'Chronicles1'    ,
    'Chronicles2'    ,
    'Ezra'           ,
    'Nehemiah'       ,
    'Esther'         ,
    'Job'            ,
    'Psalms'         ,
    'Proverbs'       ,
    'Ecclesiastes'   ,
    'SongOfSongs'    ,
    'Isaiah'         ,
    'Jeremiah'       ,
    'Lamentations'   ,
    'Ezekiel'        ,
    'Daniel'         ,
    'Hosea'          ,
    'Joel'           ,
    'Amos'           ,
    'Obadiah'        ,
    'Jonah'          ,
    'Micah'          ,
    'Nahum'          ,
    'Habakkuk'       ,
    'Zephaniah'      ,
    'Haggai'         ,
    'Zechariah'      ,
    'Malachi'        ,
    'Matthew'        ,
    'Mark'           ,
    'Luke'           ,
    'John'           ,
    'Acts'           ,
    'Romans'         ,
    'Corinthians1'   ,
    'Corinthians2'   ,
    'Galatians'      ,
    'Ephesians'      ,
    'Philippians'    ,
    'Colossians'     ,
    'Thessalonians1' ,
    'Thessalonians2' ,
    'Timothy1'       ,
    'Timothy2'       ,
    'Titus'          ,
    'Philemon'       ,
    'Hebrews'        ,
    'James'          ,
    'Peter1'         ,
    'Peter2'         ,
    'John1'          ,
    'John2'          ,
    'John3'          ,
    'Jude'           ,
    'Revelations'    ,
];

$chs = [
    'Genesis'        => ['name' => '创 世 记'            , 'count' => 50 , 'abbr' => 'GEN'],
    'Exodus'         => ['name' => '出 埃 及 记'         , 'count' => 40 , 'abbr' => 'EXO'],
    'Leviticus'      => ['name' => '利 未 记'            , 'count' => 27 , 'abbr' => 'LEV'],
    'Numbers'        => ['name' => '民 数 记'            , 'count' => 36 , 'abbr' => 'NUM'],
    'Deuteronomy'    => ['name' => '申 命 记'            , 'count' => 34 , 'abbr' => 'DEU'],
    'Joshua'         => ['name' => '约 书 亚 记'         , 'count' => 24 , 'abbr' => 'JOS'],
    'Judges'         => ['name' => '士 师 记'            , 'count' => 21 , 'abbr' => 'JDG'],
    'Ruth'           => ['name' => '路 得 记'            , 'count' => 4  , 'abbr' => 'RUT'],
    'Samuel1'        => ['name' => '撒 母 耳 记 上'      , 'count' => 31 , 'abbr' => '1SA'],
    'Samuel2'        => ['name' => '撒 母 耳 记 下'      , 'count' => 24 , 'abbr' => '2SA'],
    'Kings1'         => ['name' => '列 王 纪 上'         , 'count' => 22 , 'abbr' => '1KI'],
    'Kings2'         => ['name' => '列 王 纪 下'         , 'count' => 25 , 'abbr' => '2KI'],
    'Chronicles1'    => ['name' => '历 代 志 上'         , 'count' => 29 , 'abbr' => '1CH'],
    'Chronicles2'    => ['name' => '历 代 志 下'         , 'count' => 36 , 'abbr' => '2CH'],
    'Ezra'           => ['name' => '以 斯 拉 记'         , 'count' => 10 , 'abbr' => 'EZR'],
    'Nehemiah'       => ['name' => '尼 希 米 记'         , 'count' => 13 , 'abbr' => 'NEH'],
    'Esther'         => ['name' => '以 斯 帖 记'         , 'count' => 10 , 'abbr' => 'EST'],
    'Job'            => ['name' => '约 伯 记'            , 'count' => 42 , 'abbr' => 'JOB'],
    'Psalms'         => ['name' => '诗 篇'               , 'count' => 150, 'abbr' => 'PSA'],
    'Proverbs'       => ['name' => '箴 言'               , 'count' => 31 , 'abbr' => 'PRO'],
    'Ecclesiastes'   => ['name' => '传 道 书'            , 'count' => 12 , 'abbr' => 'ECC'],
    'SongOfSongs'    => ['name' => '雅 歌'               , 'count' => 8  , 'abbr' => 'SNG'],
    'Isaiah'         => ['name' => '以 赛 亚 书'         , 'count' => 66 , 'abbr' => 'ISA'],
    'Jeremiah'       => ['name' => '耶 利 米 书'         , 'count' => 52 , 'abbr' => 'JER'],
    'Lamentations'   => ['name' => '耶 利 米 哀 歌'      , 'count' => 5  , 'abbr' => 'LAM'],
    'Ezekiel'        => ['name' => '以 西 结 书'         , 'count' => 48 , 'abbr' => 'EZK'],
    'Daniel'         => ['name' => '但 以 理 书'         , 'count' => 12 , 'abbr' => 'DAN'],
    'Hosea'          => ['name' => '何 西 阿 书'         , 'count' => 14 , 'abbr' => 'HOS'],
    'Joel'           => ['name' => '约 珥 书'            , 'count' => 3  , 'abbr' => 'JOL'],
    'Amos'           => ['name' => '阿 摩 司 书'         , 'count' => 9  , 'abbr' => 'AMO'],
    'Obadiah'        => ['name' => '俄 巴 底 亚 书'      , 'count' => 1  , 'abbr' => 'OBA'],
    'Jonah'          => ['name' => '约 拿 书'            , 'count' => 4  , 'abbr' => 'JON'],
    'Micah'          => ['name' => '弥 迦 书'            , 'count' => 7  , 'abbr' => 'MIC'],
    'Nahum'          => ['name' => '那 鸿 书'            , 'count' => 3  , 'abbr' => 'NAM'],
    'Habakkuk'       => ['name' => '哈 巴 谷 书'         , 'count' => 3  , 'abbr' => 'HAB'],
    'Zephaniah'      => ['name' => '西 番 雅 书'         , 'count' => 3  , 'abbr' => 'ZEP'],
    'Haggai'         => ['name' => '哈 该 书'            , 'count' => 2  , 'abbr' => 'HAG'],
    'Zechariah'      => ['name' => '撒 迦 利 亚 书'      , 'count' => 14 , 'abbr' => 'ZEC'],
    'Malachi'        => ['name' => '玛 拉 基 书'         , 'count' => 4  , 'abbr' => 'MAL'],
    'Matthew'        => ['name' => '马 太 福 音'         , 'count' => 28 , 'abbr' => 'MAT'],
    'Mark'           => ['name' => '马 可 福 音'         , 'count' => 16 , 'abbr' => 'MRK'],
    'Luke'           => ['name' => '路 加 福 音'         , 'count' => 24 , 'abbr' => 'LUK'],
    'John'           => ['name' => '约 翰 福 音'         , 'count' => 21 , 'abbr' => 'JHN'],
    'Acts'           => ['name' => '使 徒 行 传'         , 'count' => 28 , 'abbr' => 'ACT'],
    'Romans'         => ['name' => '罗 马 书'            , 'count' => 16 , 'abbr' => 'ROM'],
    'Corinthians1'   => ['name' => '哥 林 多 前 书'      , 'count' => 16 , 'abbr' => '1CO'],
    'Corinthians2'   => ['name' => '哥 林 多 后 书'      , 'count' => 13 , 'abbr' => '2CO'],
    'Galatians'      => ['name' => '加 拉 太 书'         , 'count' => 6  , 'abbr' => 'GAL'],
    'Ephesians'      => ['name' => '以 弗 所 书'         , 'count' => 6  , 'abbr' => 'EPH'],
    'Philippians'    => ['name' => '腓 立 比 书'         , 'count' => 4  , 'abbr' => 'PHP'],
    'Colossians'     => ['name' => '歌 罗 西 书'         , 'count' => 4  , 'abbr' => 'COL'],
    'Thessalonians1' => ['name' => '帖 撒 罗 尼 迦 前 书', 'count' => 5  , 'abbr' => '1TH'],
    'Thessalonians2' => ['name' => '帖 撒 罗 尼 迦 后 书', 'count' => 3  , 'abbr' => '2TH'],
    'Timothy1'       => ['name' => '提 摩 太 前 书'      , 'count' => 6  , 'abbr' => '1TI'],
    'Timothy2'       => ['name' => '提 摩 太 后 书'      , 'count' => 4  , 'abbr' => '2TI'],
    'Titus'          => ['name' => '提 多 书'            , 'count' => 3  , 'abbr' => 'TIT'],
    'Philemon'       => ['name' => '腓 利 门 书'         , 'count' => 1  , 'abbr' => 'PHM'],
    'Hebrews'        => ['name' => '希 伯 来 书'         , 'count' => 13 , 'abbr' => 'HEB'],
    'James'          => ['name' => '雅 各 书'            , 'count' => 5  , 'abbr' => 'JAS'],
    'Peter1'         => ['name' => '彼 得 前 书'         , 'count' => 5  , 'abbr' => '1PE'],
    'Peter2'         => ['name' => '彼 得 后 书'         , 'count' => 3  , 'abbr' => '2PE'],
    'John1'          => ['name' => '约 翰 一 书'         , 'count' => 5  , 'abbr' => '1JN'],
    'John2'          => ['name' => '约 翰 二 书'         , 'count' => 1  , 'abbr' => '2JN'],
    'John3'          => ['name' => '约 翰 三 书'         , 'count' => 1  , 'abbr' => '3JN'],
    'Jude'           => ['name' => '犹 大 书'            , 'count' => 1  , 'abbr' => 'JUD'],
    'Revelations'    => ['name' => '启 示 录'            , 'count' => 22 , 'abbr' => 'REV'],
];

include_once('template.php');
$options = [
    'top_path' => '../../',
];
$options['HeadFoot'] = <<<EOF
<link rel="stylesheet" href="../../css/pure-min.css?1">
<link rel='stylesheet' href='../../css/my.css?2'>
<link rel="stylesheet" href="../../css/bible_content.css?5">
EOF;
$options['BodyFoot'] = <<<EOF
<div style="display: none;">
    <audio controls>
      <source src="" type="audio/mp3">
    </audio>
</div>
<script src="../../js/plyr.js"></script>
<script src="../../js/my.js?2"></script>
EOF;

$countI = 0;
foreach ($chs as $key => $obj) {
    $countI++;
    $name = $obj['name'];
    $abbr = $obj['abbr'];
    for ($i=1; $i <= $obj['count']; $i++) { 
        if (1 == $countI) {
            if (1 == $i) {
                $prevUrl = "javascript: alert('已经没有了');";
            } else {
                $tmpI = $i - 1;
                $prevUrl = "../../content/{$key}/{$key}_{$tmpI}.html";
            }
        } else {
            if (1 == $i) {
                $tmpKey = $tmpChs[$countI-2];
                $tmpI = $chs[$tmpKey]['count'];
                $prevUrl = "../../content/{$tmpKey}/{$tmpKey}_{$tmpI}.html";
            } else {
                $tmpI = $i - 1;
                $prevUrl = "../../content/{$key}/{$key}_{$tmpI}.html";
            }
        }
        if (count($tmpChs) == $countI) {
            if ($obj['count'] == $i) {
                $nextUrl = "javascript: alert('已经没有了');";
            } else {
                $tmpI = $i + 1;
                $nextUrl = "../../content/{$key}/{$key}_{$tmpI}.html";
            }
        } else {
            if ($obj['count'] == $i) {
                $tmpKey = $tmpChs[$countI];
                $tmpI = 1;
                $nextUrl = "../../content/{$tmpKey}/{$tmpKey}_{$tmpI}.html";
            } else {
                $tmpI = $i + 1;
                $nextUrl = "../../content/{$key}/{$key}_{$tmpI}.html";
            }
        }
        $tmpContent = file_get_contents("../data/{$abbr}.{$i}.html");
        $options['BodyMain'] = <<<EOF
            <div class="my-content">
                <table class="pure-table pure-table-bordered my-table">
                    <thead class="foot content-thead">
                        <tr class="my-tr">
                            <th colspan="5" class="selected">
                                <a class="my-back home" href="/">首页</a>
                                <strong class="bible-title">{$name}</strong>
                                <strong class="bible-title num">{$i}</strong>
                                <div class="control play play-pause" title="朗读"></div>
                                <div class="control pause play-pause" style="display: none;" title="暂停"></div>
                                <a class="my-back" href="/chapter/{$key}.html">返回</a>
                            </th>
                        </tr>
                    </thead>
                </table>
                <div class="my-tip bible-content-tips">
                    点击播放
                </div>
                <div class="bible-body-i bible-content display_verse_number display_title">
                    {$tmpContent}
                </div>
                <a href="{$prevUrl}" class="pevious-next previous round" title="上一章">&#8249;</a>
                <a href="{$nextUrl}" class="pevious-next next round" title="下一章">&#8250;</a>
                <table class="pure-table pure-table-bordered my-table">
                    <thead class="foot content-thead">
                        <tr class="my-tr">
                            <th colspan="5" class="selected">
                                <a class="my-back home" href="/">首页</a>
                                <strong class="bible-title">{$name}</strong>
                                <strong class="bible-title num">{$i}</strong>
                                <div class="control play play-pause" title="朗读"></div>
                                <div class="control pause play-pause" style="display: none;" title="暂停"></div>
                                <a class="my-back" href="/chapter/{$key}.html">返回</a>
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>
EOF;
        $dir = "../content/{$key}";
        if (!file_exists($dir)) {
            mkdir("../content/{$key}");
        }
        file_put_contents("{$dir}/{$key}_{$i}.html", gen_html($options));
    }
}
echo "success\n";
die;
